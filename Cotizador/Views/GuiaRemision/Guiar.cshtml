@{
    ViewBag.Title = "Crear/Modificar Guía Remisión";
    Model.GuiaRemision guiaRemision = ViewBag.guiaRemision;
    List<Model.Transportista> transportistaList = ViewBag.transportistaList;
}

<div class="page-header">
    <h3>@ViewBag.Title</h3>
</div>
<div class="container">

    <input type="hidden" value="@ViewBag.debug" />
    <form class="form-horizontal">
        <input type="hidden" id="idGuiaRemision" name="idGuiaRemision" value="2" />

        <div class="row">
            <div class="col-sm-6 col-lg-6">
                <!--Serie Documento-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.serieDocumento, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.serieDocumento, htmlAttributes: new { @class = "form-control", type = "number", min = "0" })
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-6">
                <!--Numero DOcumento-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.numeroDocumento, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.numeroDocumento, htmlAttributes: new { @class = "form-control", type = "number", min = "0" })
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-sm-6 col-lg-6">
                <!--fecha Movimiento-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.fechaMovimiento, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        <input type="hidden" id="fechaMovimientotmp" value="@ViewBag.fechaMovimientotmp" />
                        <input class="form-control" type="text" id="guiaRemision_fechaMovimiento" name="guiaRemision_fechaMovimiento">
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-6">
                <!--Numero Pedido-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.pedido.numeroPedido, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.pedido.numeroPedidoString, htmlAttributes: new { @class = "form-control", type = "number", min = "0", disabled = "disabled" })
                    </div>
                </div>
            </div>
        </div>



        <div class="row">
            <!--Ciudad Origen-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.ciudadOrigen, htmlAttributes: new { @class = "control-label col-xs-4", @for = "idCiudad" })
                    <div class="col-xs-8">
                        @Html.Action("list", "Ciudad", new { parentController = @ViewContext.RouteData.Values["controller"].ToString(), accion = "Mantenimiento" })
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-6">
                <!--Dirección Origen-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.direccionOrigen, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.direccionOrigen, htmlAttributes: new { @class = "form-control", type = "number", min = "0" })
                    </div>
                </div>
            </div>
        </div>



        <div class="row">
            <div class="col-sm-6 col-lg-6">
                <!--Ciudad Destino-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.ciudadDestino, htmlAttributes: new { @class = "control-label col-xs-4", @for = "idCiudad" })
                    <div class="col-xs-8">
                        @Html.Action("list", "Ciudad", new { parentController = @ViewContext.RouteData.Values["controller"].ToString(), accion = "Mantenimiento" })
                    </div>
                </div>

             
            </div>

            <div class="col-sm-6 col-lg-6">
                <!--Dirección Destino-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.direccionDestino, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.direccionDestino, htmlAttributes: new { @class = "form-control", type = "number", min = "0" })
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <!--MOTIVO DE TRASLADO-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    <label for="estado" class="control-label col-xs-4">Estado:</label>
                    <div class="col-xs-8">
                        @Html.DropDownList("motivoTraslado",
                         EnumHelper.GetSelectList(typeof(Model.GuiaRemision.motivosTraslado), guiaRemision.motivoTraslado),
                         new { @class = "form-control", disabled = "disabled" }
                         )
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-6">
                <!--TRANSPORTISTA-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.transportista, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.DropDownList("transportista",
                         new SelectList(transportistaList, "idTransportista", "descripcion", guiaRemision.transportista.idTransportista),
                         new { @class = "form-control " })
                    </div>
                </div>
            </div>
        </div>


        <div class="row">

            <!--DESCRIPCION TRANSPORTISTA-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.transportista.descripcion, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.transportista.descripcion, htmlAttributes: new { @class = "form-control"})
                    </div>
                </div>
            </div>

            <!--RUC TRANSPORTISTA-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.transportista.ruc, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.transportista.ruc, htmlAttributes: new { @class = "form-control", type = "number", min = "0" })
                    </div>
                </div>
            </div>
        </div>

        <div class="row">

            <!--DIRECCION TRANSPORTISTA-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.transportista.direccion, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.transportista.direccion, htmlAttributes: new { @class = "form-control"})
                    </div>
                </div>
            </div>

            <!--brevete TRANSPORTISTA-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.transportista.brevete, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.transportista.brevete, htmlAttributes: new { @class = "form-control" })
                    </div>
                </div>
            </div>
        </div>

        <div class="row">

            <!--PLACA VEHICULO-->
            <div class="col-sm-6 col-lg-6">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.placaVehiculo, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.placaVehiculo, htmlAttributes: new { @class = "form-control" })
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-6">
                <!--CERTIFICADO INSCRIPCION-->
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.certificadoInscripcion, htmlAttributes: new { @class = "control-label col-xs-4" })
                    <div class="col-xs-8">
                        @Html.TextBoxFor(g => guiaRemision.certificadoInscripcion, htmlAttributes: new { @class = "form-control" })
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!--OBSERVACIONES-->
            <div class="col-sm-6 col-lg-12">
                <div class="form-group">
                    @Html.LabelFor(g => guiaRemision.observaciones, htmlAttributes: new { @class = "control-label col-xs-2" })
                    <div class="col-xs-10">
                        <textarea class="form-control" rows="5" id="guiaRemision_observaciones" name="guiaRemision_observaciones"></textarea>
                    </div>
                </div>
            </div>
        </div>








        <table id="tablefoottable" class="table" data-editing="false"
               data-editing-show-text='<span class="fooicon fooicon-pencil" aria-hidden="true"></span> Editar Detalle'
               data-editing-allow-add="true"
               data-editing-allow-delete="true"
               data-editing-allow-edit="false"
               data-sorting="true"
               data-show-toggle="false"
               data-editing-hide-text="Finalizar edición"
               data-editing-add-text="Descartar cambios">
            <thead>
                <tr>
                    <th data-name="idProducto" data-visible="false"></th>
                    <th data-name="sku" data-sortable="false">Código</th>
                    <th data-name="cantidad" data-sortable="false" data-visible="true" data-breakpoints="xs sm">Cantidad</th>
                    <th data-name="presentacion" data-sortable="false" data-breakpoints="xs">Unidad</th>
                    <th data-name="producto" data-sortable="false">Producto</th>
                </tr>
            </thead>
            <tbody>

                @{int contador = 0;}
                @foreach (var documentoDetalle in guiaRemision.documentoDetalle)
            {
                contador++;
                <tr data-expanded="true">
                    <td>  @documentoDetalle.producto.idProducto</td>
                    <td>  @documentoDetalle.producto.sku</td>
                    <td>  @documentoDetalle.cantidad</td>
                    <td>  @documentoDetalle.unidad</td>
                    <td>  @documentoDetalle.producto.descripcion  </td>
                </tr>
        }
            </tbody>
        </table>

        <div class="row">
            <div class="pull-right">
                <button type="button" id="btnCancelarPedido" class="btn btn-danger">Cancelar</button>
                <button id="btnFinalizarCreaciónGuia" type="button" class="btn btn-success">Finalizar Creación</button>
            </div>
        </div>


    </form>
</div>




